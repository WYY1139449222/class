<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>


class Man{
    constructor(str){
        console.log( ` Hi I am ${str}`);
        this.ary=[];
        setTimeout(()=>{
            this.next();
        })
    }
    next(){
        let f= this.ary.shift();//f就是当前数组的第一项
        f&&f();
    }
    eat(type){
        this.ary.push(()=>{
            console.log(`I am eating ${type}`);
            this.next()
        })
        return this
    }
    sleepFirst(n){
        this.ary.unshift(()=>{
            setTimeout(()=>{
                console.log(`先等待了${n}秒`);
                this.next()
            },n*1000)
        })
        return this
    }
    sleep(wait){
        this.ary.push(()=>{
            setTimeout(()=>{
                console.log(`等待了${wait}秒`);
                this.next()
            },wait*1000)
        })
        return this
    }
}
function LazyMan(str){
    return new Man(str);
}
// LazyMan('Tony');
// Hi I am Tony

// LazyMan('Tony').sleep(3).eat('lunch');
// Hi I am Tony
// 等待了10秒...
// I am eating lunch

// LazyMan('Tony').eat('lunch').sleep(3).eat('dinner');
// Hi I am Tony
// I am eating lunch
// 等待了10秒...
// I am eating diner

LazyMan('Tony').eat('lunch').eat('dinner').sleepFirst(5).sleep(3).eat('junk food');
// Hi I am Tony
// 等待了5秒...
// I am eating lunch
// I am eating dinner
// 等待了10秒...
// I am eating junk food
</script>
